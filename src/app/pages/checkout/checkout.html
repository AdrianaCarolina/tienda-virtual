<div class="summary-card">
  <div class="summary-header d-flex justify-content-between align-items-center">
    <h5 class="summary-title mb-0">Datos de pago</h5>
    <button class="btn btn-sm btn-outline-secondary" (click)="cancelCheckout()">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <form (ngSubmit)="checkout()" class="mt-3">
    <!-- Nombre completo -->
    <div class="mb-3">
      <label class="form-label">Nombre completo</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="checkoutData.name"
        name="name"
        required
        placeholder="Ingresa tu nombre completo"
      />
    </div>

    <!-- Dirección de envío -->
    <div class="mb-3">
      <label class="form-label">Dirección de envío</label>
      <textarea
        class="form-control"
        [(ngModel)]="checkoutData.address"
        name="address"
        required
        rows="2"
        placeholder="Ingresa tu dirección completa"
      ></textarea>
    </div>

    <!-- Método de pago -->
    <div class="mb-3">
      <label class="form-label">Método de pago</label>
      <select
        class="form-select"
        [(ngModel)]="checkoutData.paymentMethod"
        name="paymentMethod"
        required
      >
        <option value="">Selecciona método de pago</option>
        <option value="Tarjeta de crédito">Tarjeta de crédito</option>
        <option value="Transferencia bancaria">Transferencia bancaria</option>
        <option value="Yape/Plin">Yape/Plin</option>
      </select>
    </div>

    <!-- Número de tarjeta (condicional) -->
    @if (checkoutData.paymentMethod === 'Tarjeta de crédito') {
    <div class="mb-3">
      <label class="form-label">Número de tarjeta</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="checkoutData.cardNumber"
        name="cardNumber"
        maxlength="16"
        placeholder="1234 5678 9012 3456"
        pattern="[0-9]*"
      />
    </div>
    }

    <!-- RESUMEN MINI -->
    <div class="border-top pt-3 mb-3">
      <div class="d-flex justify-content-between">
        <small>Total a pagar:</small>
        <strong>${{ cartTotal }}</strong>
      </div>
    </div>

    <!-- Botones -->
    <div class="d-grid gap-2">
      <button type="submit" class="btn btn-success" [disabled]="!isCheckoutValid()">
        <i class="fas fa-check me-2"></i>
        Confirmar compra
      </button>
      <button type="button" class="btn btn-outline-secondary" (click)="cancelCheckout()">
        Cancelar
      </button>
    </div>
  </form>
</div>
